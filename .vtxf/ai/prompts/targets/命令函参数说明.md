# mcps-proxy 命令行参数说明

本文档详细说明了 mcps-proxy 工具的所有命令行参数及其使用方法。

## 命令格式

```bash
mcps-proxy [options]
```

## 参数列表

### 1. --port <port>

**描述**: 指定服务监听端口

**默认值**: 3095

**示例**:
```bash
# 使用默认端口 3095
mcps-proxy

# 指定端口为 8080
mcps-proxy --port 8080

# 指定端口为 3000
mcps-proxy --port 3000
```

**注意**: 确保指定的端口未被其他程序占用

### 2. --config <path>

**描述**: 指定配置文件路径

**默认配置文件位置**: `~/.mcps-proxy/config.json`

**示例**:
```bash
# 使用默认配置文件
mcps-proxy

# 使用自定义配置文件
mcps-proxy --config ./my-config.json

# 使用绝对路径指定配置文件
mcps-proxy --config /home/user/custom/mcps-config.json
```

**注意**: 
- 首次运行时会自动创建默认配置文件
- 配置文件必须为有效的JSON格式
- 配置文件中定义的schemas会在启动时同时加载和激活

### 3. --version

**描述**: 显示版本信息

**示例**:
```bash
mcps-proxy --version
```

**输出示例**:
```
mcps-proxy v1.0.0
```

### 4. --help

**描述**: 显示帮助信息

**示例**:
```bash
mcps-proxy --help
```

**输出示例**:
```
Usage: mcps-proxy [options]

Options:
  --port <port>     指定服务端口 (默认: 3095)
  --config <path>   指定配置文件路径
  --version         显示版本信息
  --help            显示帮助信息
```

## 组合使用

多个参数可以组合使用：

```bash
# 使用自定义端口和配置文件
mcps-proxy --port 8080 --config ./dev-config.json

# 查看版本后再启动
mcps-proxy --version && mcps-proxy --port 3000
```

## 常见使用场景

### 开发环境
```bash
# 开发环境使用不同端口避免冲突
mcps-proxy --port 8080 --config ./dev-config.json
```

### 生产环境
```bash
# 生产环境使用默认配置和端口
mcps-proxy
```

### 测试环境
```bash
# 测试环境使用临时配置
mcps-proxy --port 3000 --config ./test-config.json
```

## 注意事项

1. **端口占用**: 如果指定端口已被占用，服务启动会失败
2. **配置文件格式**: 配置文件必须是有效的JSON格式
3. **权限问题**: 确保有权限读取配置文件和在指定端口上监听
4. **Schema加载**: 所有在配置文件中定义的schemas会在启动时自动加载和激活

## 故障排除

### 端口占用问题
```bash
# 查看端口占用情况 (Windows)
netstat -ano | findstr :3095

# 使用其他端口
mcps-proxy --port 8080
```

### 配置文件问题
```bash
# 检查JSON格式是否正确
cat ~/.mcps-proxy/config.json | jq empty

# 重新创建默认配置
rm ~/.mcps-proxy/config.json
mcps-proxy  # 首次启动会自动创建默认配置
```

### 权限问题
```bash
# 使用管理员权限运行 (Windows)
# 右键"命令提示符"选择"以管理员身份运行"

# 或使用sudo (Linux/macOS)
sudo mcps-proxy --port 80
```

## 相关文档

- [终端用户使用指南](终端用户使用指南.md)
- [配置示例](配置示例.md)
- [常见问题](常见问题.md)